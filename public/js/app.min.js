function isset(e){return e!==void 0&&null!==e}function Ajax(e,t){this.post=[],this.elm=void 0,this.loader=void 0,e&&(this.elm=e,this.loader=document.createElement("span"),this.loader.className="loading",this.loader.innerHTML='<i class="n1"></i><i class="n2"></i><i class="n3"></i>',this.elm.parentNode.replaceChild(this.loader,this.elm)),this.post.push("action="+t),this.post.push("page="+page),this.addParam=function(e,t){this.post.push(e+"="+encodeURIComponent(t))},this.send=function(e,t){var s=this,o=new XMLHttpRequest;o.open("POST",ajax_url),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(this.post.join("&")),o.onreadystatechange=function(){if(o.readyState==o.DONE){if(200==o.status){console.log(o.responseText);var n=JSON.parse(o.responseText);"success"==n.status?e!==void 0&&e(n):t!==void 0&&t(n)}else 403==o.status?alert(m_error_login):alert(m_error_ajax);s.cancel()}}},this.cancel=function(){this.loader&&this.loader.parentNode.replaceChild(this.elm,this.loader)}}function desc_episode(e){for(var t=document.querySelectorAll(".div-episode"),s=t.length-1;s>=0;s--)t[s].style.display="none";return document.getElementById(e.target.dataset.no).style.display="block",!1}function episode_watched(e){var t=e.target,s=t.dataset.no,o=new Ajax(void 0,"watched");return o.addParam("id",t.dataset.id),o.addParam("no",s),o.send(function(){var e=document.getElementById("a"+s),t=document.getElementById(s),o="watched";if("watched"==e.className){var n=t.querySelector(".span-date").textContent,a=new Date,i=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);o=i>n&&""!==n?"released":""}e.className=o,t.className="div-episode "+o}),!1}function season_watched(e){var t=e.target,s=t.dataset.s,o=new Ajax(void 0,"swatched");o.addParam("snb",s),o.addParam("id",t.dataset.id),o.send(function(){document.location.reload()})}function episode_popup(e){var t=e.target,s=t.parentNode,o=s.querySelector(".div-desc"),n=t.getBoundingClientRect();o.classList.add("no-transition"),o.style.width=n.width+"px",o.style.height=n.height+"px",o.style.top=n.top+"px",o.style.left=n.left+"px",setTimeout(function(){o.classList.remove("no-transition"),o.style.removeProperty("width"),o.style.removeProperty("height"),o.style.removeProperty("top"),o.style.removeProperty("left"),s.classList.add("open")},25),s.querySelector(".span-close").onclick=function(){var e=t.getBoundingClientRect();o.style.width=e.width+"px",o.style.height=e.height+"px",o.style.top=e.top+"px",o.style.left=e.left+"px",s.classList.remove("open")}}isset(document.getElementById("logout"))&&(document.getElementById("logout").onclick=function(){return document.getElementById("form-logout").submit(),!1}),isset(document.getElementById("series"))&&(document.getElementById("series").onclick=function(){return document.getElementById("nav").className="display-series",!1}),isset(document.getElementById("back"))&&(document.getElementById("back").onclick=function(){return document.getElementById("nav").className="",!1});for(var a_episode=document.querySelectorAll(".ul-episodes a"),i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=desc_episode;a_episode=document.querySelectorAll(".div-episode a");for(var i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=episode_watched;for(var a_season=document.querySelectorAll(".a-season"),i=a_season.length-1;i>=0;i--)a_season[i].onclick=season_watched;a_episode=document.querySelectorAll(".div-season .span-no");for(var i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=episode_popup;