function isset(e){return e!==void 0&&null!==e}function Ajax(e,t){this.post=[],this.elm=void 0,this.loader=void 0,e&&(this.elm=e,this.loader=document.createElement("span"),this.loader.className="loading",this.loader.innerHTML='<i class="n1"></i><i class="n2"></i><i class="n3"></i>',this.elm.parentNode.replaceChild(this.loader,this.elm)),this.post.push("action="+t),this.post.push("page="+page),this.addParam=function(e,t){this.post.push(e+"="+encodeURIComponent(t))},this.send=function(e,t){var o=this,s=new XMLHttpRequest;s.open("POST",ajax_url),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(this.post.join("&")),s.onreadystatechange=function(){if(s.readyState==s.DONE){if(200==s.status){console.log(s.responseText);var n=JSON.parse(s.responseText);"success"==n.status?e!==void 0&&e(n):t!==void 0&&t(n)}else 403==s.status?alert(m_error_login):alert(m_error_ajax);o.cancel()}}},this.cancel=function(){this.loader&&this.loader.parentNode.replaceChild(this.elm,this.loader)}}function desc_episode(e){for(var t=document.querySelectorAll(".div-episode"),o=t.length-1;o>=0;o--)t[o].style.display="none";return document.getElementById(e.target.dataset.no).style.display="block",!1}function episode_watched(e){var t=e.target,o=t.dataset.no,s=new Ajax(void 0,"watched");return s.addParam("id",t.dataset.id),s.addParam("no",o),s.send(function(){var e=document.getElementById("a"+o),t=document.getElementById(o),s="watched";if("watched"==e.className){var n=t.querySelector(".span-date").textContent,a=new Date,i=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);s=i>n&&""!==n?"released":""}e.className=s,t.className="div-episode "+s}),!1}function season_watched(e){var t=e.target,o=t.dataset.s,s=new Ajax(void 0,"swatched");s.addParam("snb",o),s.addParam("id",t.dataset.id),s.send(function(){document.location.reload()})}function episode_popup(e){var t=e.target,o=t.parentNode,s=o.querySelector(".div-desc"),n=t.getBoundingClientRect(),a=new Ajax(void 0,"subtitles");a.addParam("id",t.dataset.id),a.addParam("no",t.textContent),a.send(function(e){s.querySelector(".div-subtitles").innerHTML=e.ans}),s.classList.add("no-transition"),s.style.width=n.width+"px",s.style.height=n.height+"px",s.style.top=n.top+"px",s.style.left=n.left+"px",setTimeout(function(){s.classList.remove("no-transition"),s.style.removeProperty("width"),s.style.removeProperty("height"),s.style.removeProperty("top"),s.style.removeProperty("left"),o.classList.add("open")},25),o.querySelector(".span-close").onclick=function(){var e=t.getBoundingClientRect();s.style.width=e.width+"px",s.style.height=e.height+"px",s.style.top=e.top+"px",s.style.left=e.left+"px",o.classList.remove("open")},o.querySelector(".span-watched").onclick=function(){var e=new Ajax(void 0,"watched");e.addParam("id",t.dataset.id),e.addParam("no",t.textContent),e.send(function(){o.parentNode.removeChild(o)})}}isset(document.getElementById("logout"))&&(document.getElementById("logout").onclick=function(){return document.getElementById("form-logout").submit(),!1}),isset(document.getElementById("series"))&&(document.getElementById("series").onclick=function(){return document.getElementById("nav").className="display-series",!1}),isset(document.getElementById("back"))&&(document.getElementById("back").onclick=function(){return document.getElementById("nav").className="",!1});for(var a_episode=document.querySelectorAll(".ul-episodes a"),i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=desc_episode;a_episode=document.querySelectorAll(".div-episode a");for(var i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=episode_watched;for(var a_season=document.querySelectorAll(".a-season"),i=a_season.length-1;i>=0;i--)a_season[i].onclick=season_watched;a_episode=document.querySelectorAll(".div-season .span-no");for(var i=a_episode.length-1;i>=0;i--)a_episode[i].onclick=episode_popup;